# cargo-mutants configuration — Sprint BB TH.1
#
# Run with: cargo mutants --workspace
#
# Focus on critical modules: session, security, signing, policy engine.
# Target 80%+ mutation kill rate.
#
# Install: cargo install cargo-mutants
# CI: see .github/workflows/mutation-testing.yml

[default]
# Modules to test (paths relative to src/)
# cargo-mutants v0.3+ supports "in_module" filtering
exclude_globs = [
    # Skip test files themselves
    "src/**/*_test*.rs",
    "src/**/tests*.rs",
    # Skip codegen / generated code
    "src/init_templates.rs",
    # Skip main.rs startup boilerplate (untestable without full process)
    "src/main.rs",
    # Skip UI-only modules
    "src/ide/**",
    "src/mdns/**",
    "src/telemetry/**",
]

# Only mutate the critical modules
include_globs = [
    "src/session/**/*.rs",
    "src/security/**/*.rs",
    "src/policy/**/*.rs",
    "src/license/**/*.rs",
    "src/ipc/auth.rs",
    "src/intelligence/**/*.rs",
    "src/agents/routing.rs",
    "src/agents/capabilities.rs",
    "src/agents/prompt_cache.rs",
    "src/agents/provider_session.rs",
    "src/storage/mod.rs",
]

# Test timeout — mutation tests run each test suite per mutant
timeout_multiplier = 3.0

# Fail fast: stop after the first timeout (avoids hanging CI)
error_count_limit = 5
